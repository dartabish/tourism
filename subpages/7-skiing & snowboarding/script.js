const courses = [
  {
    id: 1,
    title: '1 Week Skiing CourseÂ in Gulmarg',
    img: 'https://images.unsplash.com/photo-1551698618-1dfe5d97d256?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
    details: {
      coursePlan: {
        day1: {
          id: 1,
          title: 'Day 1: Arrival and Acclimatization',
          description: `Activities: Arrive in Gulmarg and get accustomed to the altitude. Leisurely explore the surroundings. Evening briefing about the course, skiing equipment, and safety protocols.`,
        },
        day2: {
          id: 2,
          title: 'Day 2: Skiing Basics and Practice',
          description: `Morning Session: Learn basic skiing techniques, including the correct posture, balance, and the plow stop technique. Afternoon Session: Practice these basics on gentle slopes under instructor supervision.`,
        },
        day3: {
          id: 3,
          title: 'Day 3: Advancing Skills',
          description: `Morning Session: Recap of Day 2 lessons, followed by instruction on turning techniques and speed control. Afternoon Session: Practice these new skills on slightly steeper slopes.`,
        },
        day4: {
          id: 4,
          title: 'Day 4: Skill Refinement',
          description: `Morning Session: Introduction to advanced techniques like parallel turns and carving. Afternoon Session: Practice on varied terrain to refine these skills and build confidence.`,
        },
        day5: {
          id: 5,
          title: 'Day 5: Exploring the Slopes',
          description: `Morning Session: Apply the learned skills on different slopes of Gulmarg under guidance. Afternoon Session: Feedback session with instructors on progress and areas for improvement.`,
        },
        day6: {
          id: 6,
          title: 'Day 6: Skiing from Phase 1',
          description: `With the confidence and control you have gained from your previous lessons, you will be able to experience the thrill of skiing from Phase 1 to the base.`,
        },
        day7: {
          id: 7,
          title: 'Day 7: Departure',
          description: `On the seventh and final day of your adventure, you will depart from the slopes and make your way back home, filled with memories of your amazing skiing experience.`,
        },
      },
    },
  },
  {
    id: 2,
    title: '2 Week Skiing Course in Gulmarg',
    img: 'https://images.unsplash.com/photo-1605540436563-5bca919ae766?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
    details: {
      coursePlan: {
        day: {
          id: 1,
          title: 'Two Week Course Details: ',
          description: `With our fortnight-long skiing program, you're presented with a unique chance to dive deep into the skiing universe and discover everything this incredible sport encompasses. Our detailed itinerary for a week's worth of skiing activities, paired with access passes for both Phase 1 and Phase 2 for the entire week, ensures you have sufficient time and resources to polish your skiing prowess, boost your self-assurance, and enjoy the thrill of the slopes. For those craving a more demanding adventure, our package also offers the chance to elevate your skiing capabilities and test your boundaries by taking on the slopes from the pinnacle of Mount Apharwat Peak.`,
        },
      },
    },
  },
  {
    id: 3,
    title: '1 Week Snowboarding Course in Gulmarg',
    img: 'https://images.unsplash.com/photo-1553815035-92b6eef66226?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
    details: {
      coursePlan: {
        day1: {
          id: 1,
          title: 'Day 1: Arrival and Acclimatization',
          description: `Activities: Arrive in Gulmarg and get accustomed to the altitude. Leisurely explore the surroundings. Evening briefing about the course, snowboarding equipment, and safety protocols.`,
        },
        day2: {
          id: 2,
          title: 'Day 2: Grabbing your snowboards',
          description: `You will be provided with top-of-the-line snowboarding gear to ensure a safe and comfortable experience. This includes a snowboard, boots, bindings, gloves, helmet, and goggles. Our team will take the time to guide you on the proper use of each piece of equipment, so you can confidently hit the slopes with peace of mind.`,
        },
        day3: {
          id: 3,
          title: 'Day 3: Learning Snowbaording Basics',
          description: `During the third day of your exhilarating journey, a seasoned snowboarding coach will be at your service to navigate you through the essential techniques of snowboarding. This expert, committed to your learning and safety, will ensure you grasp the foundational aspects of the sport while having a delightful experience on the slopes. Leveraging their profound knowledge and tailored guidance, you can be confident that by the time you depart from Gulmarg, you'll possess a comprehensive understanding of snowboarding, along with the assurance to master the slopes effortlessly.`,
        },
        day4: {
          id: 4,
          title: 'Day 4: Skill Refinement',
          description: `On the fourth day of your adventure, the focus shifts towards refining your snowboarding abilities. Under the guidance of our adept instructor, you'll delve into the critical techniques vital for ensuring a secure and pleasurable time on the slopes. You'll cover everything from maintaining balance on your board to executing smooth turns and coming to a stop efficiently.`,
        },
        day5: {
          id: 5,
          title: 'Day 5: Testing Your Skills',
          description: `On the fifth day of your journey, you're poised to challenge your freshly acquired skills and techniques. Empowered with the confidence and insight nurtured through the preceding days of training, you'll be presented with the chance to showcase your snowboarding prowess in a definitive test.`,
        },
        day6: {
          id: 6,
          title: 'Day 6: Snowboarding from Phase 1',
          description: `
          On the sixth day of your expedition, you're ready to elevate your snowboarding abilities. You'll challenge yourself on the more demanding slopes, venturing beyond previous boundaries and experiencing snowboarding's exhilaration in unparalleled ways. Guided and supported by our seasoned instructor, you'll progress from beginner stages to more advanced techniques, demonstrating your enhanced skills and savoring every moment of the descent.`,
        },
        day7: {
          id: 7,
          title: 'Day 7: Back To Home',
          description: `
          As your adventure reaches its culmination, the time has come to bid farewell to Gulmarg and return home, carrying a treasure trove of indelible memories. Your seven-day snowboarding odyssey concludes here, yet the skills and memories acquired will endure forever. We're grateful you selected us to navigate you through this remarkable journey! `,
        },
      },
    },
  },
  {
    id: 4,
    title: '2 Week Snowboarding Course in Gulmarg',
    img: 'https://images.unsplash.com/photo-1599405653894-8a595f692abf?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
    details: {
      coursePlan: {
        day: {
          id: 1,
          title: 'Two Week Course Details: ',
          description: `
          Our fortnight package includes a comprehensive schedule of activities spanning seven days, and to enrich your experience, we provide weekly passes granting access to both Phase 1 and Phase 2 areas. Furthermore, this package offers you the chance to further refine your snowboarding skills with an exhilarating descent from the summit of Mount Apharwat Peak.`,
        },
      },
    },
  },
];

const packageCardsContainer = document.querySelector('.package-card-container');
courses.forEach(course => {
  const packageCard = document.createElement('article');
  packageCard.className = 'package-card';
  packageCard.id = course.id;

  let innerHTMLContent;
  innerHTMLContent = `
        <div class="package-card-banner">
          <img src="${course.img}" alt="${course.title}" />
        </div>

        <div
          class="package-card-details d-flex flex-column justify-content-between"
        >
          <div
            class="package-card-header d-flex justify-content-between align-items-center p-3"
          >
            <h3 class="package-card-title ps-2">${course.title}</h3>
          </div>

          <div class="itenary">
            <div
              class="accordion accordion-flush itenary-accordian"
              id="accordian-${course.id}"
            >
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#itenary-${course.id}"
                    aria-expanded="false"
                    aria-controls="itenary-${course.id}"
                  >
                    <h5 class="accordion-title">Itinerary</h5>
                  </button>
                </h2>
                <div
                  id="itenary-${course.id}"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordian-${course.id}"
                >
                  <div class="accordion-body">
                    <ul class="itenary">
                      ${Object.keys(course.details.coursePlan)
                        .map(
                          day => `
                      <li class="course-plan">
                        <div class="day">${course.details.coursePlan[day].title}</div>
                        <div class="day-plan">${course.details.coursePlan[day].description}</div>
                      </li>
                      `
                        )
                        .join('')}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="package-card-booking ps-3 pe-3 pb-2 d-flex justify-content-center"
          >
            <button class="package-enquiry-btn w-100" data-bs-toggle="modal" data-bs-target="#exampleModal${
              course.id
            }">Send Enquiry
            </button>
          </div>
        </div>

         <!-- Modal -->
        <div class="modal fade " id="exampleModal${
          course.id
        }" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content p-4">
                    <div class="d-flex justify-content-between">
                        <h4 class="fw-semi-bold">Enquiry Details</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    
                    <div class="booking-details"></div>
                    <form action="https://formsubmit.co/info@espreeholidays.com"
                method="POST" id="bookingForm${
                  course.id
                }" class="enquiry-form" data-package-id="${
    course.id
  }"  autocomplete="on">
                <input type="hidden" name="_next" value="https://espreeholidays.com/thanks.html">
                <input type="hidden" name="_subject" value="Skiing & Snowboarding Enquiry!"/>
                <input type="hidden" name="_captcha" value="false" />
                        <div class="form-floating" >
                            <input
                            readonly
                                value="${course.title}"
                                type="text"
                                name="Selected Package"
                                class="form-control-plaintext"
                                id="floatingPackage${course.id}"
                                placeholder="Selected Package"
                                required
                            />
                            <label for="floatingPackage${
                              course.id
                            }">Selected Package*</label>
                        </div>
                        
                        <div class="form-floating mb-2">
                            <input
                                type="text"
                                name="Full Name"
                                class="form-control"
                                id="floatingFullName${course.id}"
                                placeholder="Full Name"
                                required
                            />
                            <label for="floatingFullName${
                              course.id
                            }">Full Name*</label>
                        </div>

                         <div class="form-floating mb-2">
                            <input
                                type="email"
                                name="Email"
                                class="form-control"
                                id="floatingEmail${course.id}"
                                placeholder="Email"
                                required
                            />
                            <label for="floatingEmail${
                              course.id
                            }">Email*</label>
                        </div>

                        <div class="form-floating mb-2">
                            <input
                                type="tel"
                                name="Phone"
                                class="form-control"
                                id="floatingPhone${course.id}"
                                placeholder="Phone"
                            />
                            <label for="floatingPhone${
                              course.id
                            }">Phone (Optional)</label>
                        </div>

                        <div class="form-floating mb-2 ">
                              <input
                                type="date"
                                name="Start Date"
                                class="form-control"
                                id="floatingStartDate${course.id}"
                                placeholder="Date of Arrival" 
                                />
                              <label for="floatingStartDate${
                                course.id
                              }">Date of Arrival</label>
                          </div>

                        
                        <div class="form-floating mb-2">
                              <textarea
                                class="form-control"
                                name="Message"
                                id="floatingMessage${course.id}"
                                placeholder="Message"
                                style="height: 160px"
                              ></textarea>
                                    <label for="floatingMessage${
                                      course.id
                                    }">Message</label>
                        </div>
                                <button type="submit" class="send-enquiry-final w-100 mt-4">Submit Now
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
  `;
  packageCard.innerHTML = innerHTMLContent;
  packageCardsContainer.appendChild(packageCard);
});

// Event listener for form submissions
/* packageCardsContainer.addEventListener('submit', function (event) {
  if (event.target.classList.contains('enquiry-form')) {
    event.preventDefault();

    // Extract form data
    let packageId = event.target.getAttribute('data-package-id');
    let formData = {
      selectedPackage: event.target.querySelector(
        `#floatingPackage${packageId}`
      ).value,
      startDate: event.target.querySelector(`#floatingStartDate${packageId}`)
        .value,
      fullName: event.target.querySelector(`#floatingFullName${packageId}`)
        .value,
      phone: event.target.querySelector(`#floatingPhone${packageId}`).value,
      message: event.target.querySelector(`#floatingMessage${packageId}`).value,
    };

    var email = 'info@espreeholidays.com';
    var subject = 'course Package Enquiry';
    var emailBody = `Hi, I'm interested in booking a course package!\nSelected Package: ${formData.selectedPackage}\nDate of Arrival: ${formData.startDate}\nFull Name: ${formData.fullName}\nPhone: ${formData.phone}\nAdditional Instructions: ${formData.message}`;
    var email = `mailto:${email}?subject=${encodeURIComponent(
      subject
    )}&body=${encodeURIComponent(emailBody)}`;
    window.open(email, '_blank').focus();
    window.location.reload();
  }
}); */

const backToTopBtn = document.getElementById('myBtn');
function scrollFunction() {
  if (
    document.body.scrollTop > 500 ||
    document.documentElement.scrollTop > 500
  ) {
    backToTopBtn.style.opacity = '1';
  } else {
    backToTopBtn.style.opacity = '0';
  }
}

/* Back To Top button functionality */
backToTopBtn.addEventListener('click', () => {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
});

window.onscroll = function () {
  scrollFunction();
};
